(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{575:(e,t,r)=>{Promise.resolve().then(r.bind(r,8306))},8306:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(5881),s=r(1139),o=r(6797);function n(){let e=(0,s.useSearchParams)().get("app"),[t,r]=(0,o.useState)(),[n,l]=(0,o.useState)(!1),[i,d]=(0,o.useState)("");(0,o.useEffect)(()=>{!async function(){if(e)try{let t=await fetch("http://localhost:8080/api/apps/".concat(e));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let a=await t.json();r(a)}catch(e){console.error("Failed to fetch data:",e),r(null)}}()},[e]);let c=async e=>{e.preventDefault();let t=new FormData(e.currentTarget);try{let e=await fetch("http://localhost:8080/api/identity/startLogin",{method:"POST",body:t});if(e.redirected)window.location.href=e.url;else{let t=await e.text();console.log(t),d(t)}}catch(e){console.error("Error submitting form:",e),d("An error occurred. Please try again.")}};return t?(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-4xl",children:["Login - ",t.name]}),(0,a.jsxs)("h2",{children:[t.name," requests access to the following data:"]}),(0,a.jsx)("ul",{children:t.scopes.map(e=>(0,a.jsxs)("li",{children:[e.name,": ",e.description]},e.name))}),(0,a.jsx)("h2",{children:"Do you want to give access?"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)("button",{onClick:()=>l(!0),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Yes"}),(0,a.jsx)("button",{onClick:()=>window.location.href=t.redirectUri+"?error=denied",className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"No"})]}),n&&(0,a.jsx)("div",{className:"my-4",children:(0,a.jsxs)("form",{className:"border-2 border-foreground",onSubmit:c,method:"POST",children:[(0,a.jsx)("label",{className:"text-sm w-full font-bold py-2 px-4 rounded",htmlFor:"did",children:"Username/DID:"}),(0,a.jsx)("input",{type:"hidden",name:"appId",value:e}),(0,a.jsx)("input",{type:"text",id:"did",name:"did",placeholder:"User ID / DID"}),(0,a.jsx)("button",{className:"w-full bg-green-500 ",type:"submit",children:"Log IN"}),(0,a.jsx)("p",{className:"text-red-500",children:i})]})})]}):(0,a.jsx)("div",{children:"Loading or invalid data..."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[364,770,358],()=>t(575)),_N_E=e.O()}]);