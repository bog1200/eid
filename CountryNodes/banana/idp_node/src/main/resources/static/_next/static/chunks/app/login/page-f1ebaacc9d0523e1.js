(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{575:(e,t,r)=>{Promise.resolve().then(r.bind(r,8306))},8306:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(5881),s=r(1139),n=r(6797);function o(){let e=(0,s.useSearchParams)(),t=e.get("app")||e.get("client_id"),[r,o]=(0,n.useState)(),[i,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)("");(0,n.useEffect)(()=>{!async function(){if(t)try{let e=await fetch("/api/apps/".concat(t));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();o(r)}catch(e){console.error("Failed to fetch data:",e),o(null)}}()},[t]);let h=async e=>{e.preventDefault();let t=new FormData(e.currentTarget);try{let e=await fetch("/api/identity/startLogin",{method:"POST",body:t});if(e.redirected)window.location.href=e.url;else{let t=await e.text();console.log(t),c(t)}}catch(e){console.error("Error submitting form:",e),c("An error occurred. Please try again.")}};return r?(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-4xl",children:["Login - ",r.name]}),(0,a.jsxs)("h2",{children:[r.name," requests access to the following data:"]}),(0,a.jsx)("ul",{children:r.scopes.map(e=>(0,a.jsxs)("li",{children:[e.name,": ",e.description]},e.name))}),(0,a.jsx)("h2",{children:"Do you want to give access?"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)("button",{onClick:()=>l(!0),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Yes"}),(0,a.jsx)("button",{onClick:()=>window.location.href=r.redirectUri+"?error=denied",className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"No"})]}),i&&(0,a.jsx)("div",{className:"my-4",children:(0,a.jsxs)("form",{className:"border-2 border-foreground",onSubmit:h,method:"POST",children:[(0,a.jsx)("label",{className:"text-sm w-full font-bold py-2 px-4 rounded",htmlFor:"did",children:"Username/DID:"}),(0,a.jsx)("input",{type:"hidden",name:"appId",value:t}),(0,a.jsx)("input",{type:"text",id:"did",name:"did",placeholder:"User ID / DID"}),(0,a.jsx)("button",{className:"w-full bg-green-500 ",type:"submit",children:"Log IN"}),(0,a.jsx)("p",{className:"text-red-500",children:d})]})})]}):(0,a.jsx)("div",{children:"Loading or invalid data..."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[364,770,358],()=>t(575)),_N_E=e.O()}]);